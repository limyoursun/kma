<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>지진통합관리시스템</title>
  <link rel="icon" href="../images/favicon.png" type="image/x-icon" />
  <link rel="stylesheet" href="../plugins/axicon/axicon.min.css" />
  <link rel="stylesheet" href="../plugins/jquery-ui/themes/base/jquery-ui.min.css" />
  <link rel="stylesheet" href="../plugins/jqueryui-timepicker-addon/dist/jquery-ui-timepicker-addon.min.css" />
  <link rel="stylesheet" href="../plugins/jqGrid/css/ui.jqgrid.css" />
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/sub.css">
  <link rel="stylesheet" href="../css/pop.css">
  <script src="../plugins/jquery/dist/jquery.min.js"></script>
  <script src="../plugins/jquery-ui/jquery-ui.min.js"></script>
  <script src="../plugins/jquery-ui/ui/i18n/datepicker-ko.js"></script>
  <script src="../plugins/jqueryui-timepicker-addon/dist/jquery-ui-timepicker-addon.min.js"></script>
  <script src="../plugins/jqueryui-timepicker-addon/dist/i18n/jquery-ui-timepicker-ko.js"></script>
  <script src="../plugins/jqGrid/js/jquery.jqGrid.min.js"></script>
  <script src="../plugins/jqGrid/js/i18n/grid.locale-kr.js"></script>
  <script src="../js/ui_common.js"></script>
  <link rel="stylesheet" href="../css/ol/ol.css">
</head>
<body>
<div class="wrap">
  <div class="header">
    <div class="util">
  <div class="center">
    <span>관리자님 반갑습니다.</span>
    <ul class="util_list">
      <li><button type="button">내정보</button></li>
      <li><button type="button">로그아웃</button></li>
    </ul>
  </div>
</div>
<div class="center nav">
  <h1><a href="#"><img src="../images/logo.png" alt="지능형 상황관리 시스템 로고"></a></h1>
  <ul class="gnb" role="navigation">
    <li><a href="../dist/monitoring_dataSink.html">재난사고 검색</a>
    </li>
    <li class="on"><a href="#">재난사고 통계</a>
    </li>
    <li><a href="./../사용자관리.html">시스템관리</a>
      <ul class="sub">
        <li><a href="./../사용자관리.html">사용자관리</a></li>
        <li><a href="#">공통코드관리</a></li>
      </ul>
    </li>
  </ul>
</div>
  </div>
  <div class="cont monitoring_dataSink">
    <div class="locate">
      <ul>
        <li><a href="#">메인</a></li>
        <li><a href="#">실시간 모니터링</a></li>
        <li>데이터 수신현황</li>
      </ul>
    </div>
    <div class="tit">
      <h2><b>데이터</b> 수신현황</h2>
    </div>
    <div class="flex_wrap f_sb">
      <div class="section gis_wrap">
        <div class="gis_area">
          <img src="http://placehold.it/500x600" width="100%" height="100%" alt="지도 영역" />
          <i class="i_status i_ok" style="left:100px;top:200px;">정상</i>     
          <i class="i_status i_all" style="left:100px;top:300px;">미수신</i>     
          <i class="i_status i_mma" style="left:200px;top:300px;">미수신(MMA)</i>     
          <i class="i_status i_miniseed" style="left:200px;top:450px;">미수신(mini-SEED)</i>     
          <i class="i_status i_check" style="left:200px;top:350px;">점검중</i>     
        </div>
        <div class="layer">
          <div class="tit">
            <h3>분당(BAG)</h3>
            <button type="button" class="axi btn_close">닫기</button>
          </div>
          <div class="body">
            <dl class="dot_dl_list">
              <dt>MMA</dt>
              <dd class="i_status i_ok">정상</dd>
              <dt>mini-SEED</dt>
              <dd class="i_status i_ok">정상</dd>
              <dt>발생시각</dt>
              <dd>2019-05-06 12:23:34</dd>
              <dt>확인시각</dt>
              <dd>2019-05-06 12:23:34</dd>
            </dl>
          </div>
        </div>
        <div class="legend">
          <h3>범례</h3>
          <ul>
            <li class="i_status i_ok">정상</li>
            <li class="i_status i_all">미수신(전체)</li>
            <li class="i_status i_mma">미수신(MMA)</li>
            <li class="i_status i_miniseed">미수신(mini-SEED)</li>
            <li class="i_status i_check">점검중</li>
          </ul>
        </div>
      </div>
      <div class="section section_r">
        <div class="search">
          <ul>
            <li>
              <select name="" id="" title="지역본부 선택"><option value="">경인지역본부</option></select>
            </li>
            <li class="in_label">
              <label for="MMA"><input type="checkbox" id="MMA"/>MMA</label>
              <label for="mini-SEED"><input type="checkbox" id="mini-SEED"/>mini-SEED</label>
            </li>
            <li>
              <button type="button" class="btn btn_gray">검색</button>
            </li>
          </ul>
          <!-- <div class="search_btn">
          </div> -->
        </div>
        <div class="tbl_wrap">
          <ul class="filter deco" role="checklist">
            <li><label for="f1"><input type="radio" name="filter" id="f1">전체 <span>145</span>개소</label></li>
            <li><label for="f2"><input type="radio" name="filter" id="f2">정상 <span>105</span>개소</label></li>
            <li><label for="f3"><input type="radio" name="filter" id="f3" checked>미수신/점검중 <span>35</span>개소</label></li>
          </ul>
          <div class="tbl_top">
            <div class="btn_wrap">
              <button type="button" class="btn_ico btn_greenline btn_excel">엑셀저장</button>
            </div>
          </div>
          <table id="jqGrid1" class="jq-grid"></table>
        </div>
      </div>
    </div>
  </div>
  <div class="footer">
  <p class="alignC">Copyright &copy;2020 KMA. All Rights RESERVED</p>
</div>

</div>
<script>
var mydata3=[
  {"status":'unconfirmed',"t1":"all","t2":"경기","t3":"광명","t4":"2019-05-06 12:23:34","t5":"-","t6":"미확인"},
  {"status":'unconfirmed',"t1":"mini-SEED","t2":"경기","t3":"시흥","t4":"2019-05-06 12:23:34","t5":"-","t6":"미확인"},
  {"status":'confirmed',"t1":"MMA","t2":"경기","t3":"부천","t4":"2019-05-06 12:23:34","t5":"홍길동","t6":"2019-05-06"},
  {"status":'confirmed',"t1":"check","t2":"경기","t3":"안양","t4":"-","t5":"-","t6":"-"},
  {"status":'confirmed',"t1":"ok","t2":"경기","t3":"안양","t4":"-","t5":"-","t6":"-"}
];
var grid1 = $("#jqGrid1");
grid1.jqGrid({
    // url: 'data.json',
    // datatype: "json",
    // jsonReader : {repeatitems : false},
    editurl: 'clientArray',
    data: mydata3,
    datatype: "local",
    colModel: [
      {name : 'status', hidden:true},
      { label: "수신상태", name: 't1', width: 100, formatter: dataSink},
      // { label: "수신상태", name: 't1', width: 140, cellattr: function () { return " class='t_tag_area'" }},
      { label: "지역", name: 't2', width: 100 },
      { label : "관측소", name: 't3', width: 120 },
      { label : "장애시간", name: 't4', width: 120 },
      { label : "확인자", name: 't5', align: 'center',width: 120 },
      { label : "확인시각", name: 't6', align: 'center', width: 120 , formatter : btn_confirm},
      { label: "상세", name: "t7", width: 40, align: 'center',formatter : btn_dtl}
    ],
    loadonce : true,
    viewrecords: true,
    height: 460,
    // multiselect: true,
    rowTotal: -1,
    loadComplete : function(idx, rowId){
      var rowIds = $(this).jqGrid('getDataIDs');
      $.each(
        rowIds, function(idx,rowId){
          var rowData = grid1.getRowData(rowId),
              state = "";
          if(rowData.status === 'unconfirmed') state = "unconfirmed";
          grid1.jqGrid('setRowData', rowId, false, state);
        }
      )
    }
  });
  jqgridInit();
  function dataSink(cellValue, options, rowdata, action){
    var html, txt = "";
    switch (cellValue) {
      case "all": 
        txt = "전체";        
        break;
      case "mini-SEED": 
        txt = "mini-SEED";        
        break;
      case "MMA": 
        txt = "MMA";        
        break;
      case "check": 
        txt = "점검중";        
        break;
      default:
        txt = "정상";        
        break;
    }
    html = '<span class="tbl_tag ' + cellValue+'">'+ txt +'</span>';
    return html;
  }
  function btn_confirm(cellValue, options, rowdata, action){
    var html;
      if (cellValue === "미확인"){
        html = '<button type="button" class="btn btn_s btn_pinkline" onclick="' + cellValue + ' "title="미확인">미확인</button>';
      }else{
        html = cellValue;
      }
      return html;
  }
  function btn_dtl(cellValue, options, rowdata, action){
    var html;
      html = '<button type="button" class="btn_ico_only btn_dtl" onclick="' + cellValue + ' "title="상세보기">상세보기</button>';
    return html;
  }
</script>
</body>
</html>